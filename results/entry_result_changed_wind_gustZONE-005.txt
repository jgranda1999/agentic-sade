======================================================================
FINAL DECISION
======================================================================
Type: APPROVED-CONSTRAINTS
SADE Message: APPROVED-CONSTRAINTS,(SPEED_LIMIT(7m/s),MAX_ALTITUDE(30m))
Constraints: ['SPEED_LIMIT(7m/s)', 'MAX_ALTITUDE(30m)']
Explanation: Approved with constraints: near wind envelope; all high-severity incidents resolved.
======================================================================

Full output (decision + visibility):
{
  "decision": {
    "type": "APPROVED-CONSTRAINTS",
    "sade_message": "APPROVED-CONSTRAINTS,(SPEED_LIMIT(7m/s),MAX_ALTITUDE(30m))",
    "constraints": [
      "SPEED_LIMIT(7m/s)",
      "MAX_ALTITUDE(30m)"
    ],
    "action_id": null,
    "actions": [],
    "denial_code": null,
    "explanation": "Approved with constraints: near wind envelope; all high-severity incidents resolved."
  },
  "visibility": {
    "entry_request": {
      "zone_id": "ZONE-005",
      "pilot_id": "PILOT-12345",
      "org_id": "ORG-MNO",
      "drone_id": "DRONE-XYZ-001",
      "entry_time": "2026-02-03T09:00:00Z",
      "request_type": "ROUTE",
      "waypoints": [
        {
          "lat": 40.7128,
          "lon": -74.006,
          "alt_m": 150
        },
        {
          "lat": 40.7228,
          "lon": -74.016,
          "alt_m": 180
        },
        {
          "lat": 40.7328,
          "lon": -74.026,
          "alt_m": 200
        },
        {
          "lat": 40.7428,
          "lon": -74.036,
          "alt_m": 180
        },
        {
          "lat": 40.7528,
          "lon": -74.046,
          "alt_m": 150
        }
      ]
    },
    "environment": {
      "facts": {
        "wind_now_kt": 30.0,
        "gust_now_kt": 40.0
      },
      "recommendation": "HIGH",
      "why": [
        "wind_steady_kt=30.0",
        "wind_gust_kt=40.0",
        "risk_level=HIGH",
        "blocking_factors=['high_wind_gusts']"
      ]
    },
    "reputation": {
      "facts": {
        "demo_steady_max_kt": 28.0,
        "demo_gust_max_kt": 38.0,
        "incident_prefixes_present": [
          "0101",
          "0011",
          "0100"
        ],
        "n_0100_0101": 4
      },
      "recommendation": "HIGH",
      "why": [
        "drp_sessions_count=21",
        "demo_steady_max_kt=28.0",
        "demo_gust_max_kt=38.0",
        "n_0100_0101=4",
        "unresolved_incidents_present=True",
        "incident_prefixes_present=['0101', '0011', '0100']"
      ]
    },
    "claims": {
      "called": true,
      "facts": {
        "claims_satisfied": true,
        "resolved_prefixes": [
          "0101",
          "0100",
          "0011"
        ],
        "unresolved_prefixes": [],
        "satisfied_actions": [
          "RESOLVE_HIGH_SEVERITY_INCIDENTS"
        ],
        "unsatisfied_actions": []
      },
      "why": [
        "verified follow-up for high-severity prefix(es) ['0011'] (from sade-mock-data)"
      ]
    },
    "rule_trace": [
      "STATE_3_RULE_HIGH_SEV_INCIDENT",
      "STATE_5_RULE_CLAIMS_SATISFIED"
    ]
  }
}
